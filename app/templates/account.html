<div ng-class="(account.delegate_info) ? 'row head-bg-delegate p-inner' : 'row head-bg p-inner'">

	<div class="col-sm-2">
		<gravatar-image  data-gravatar-email="account.private_data.gui_data.email" data-gravatar-size="512" data-gravatar-rating="pg" data-gravatar-default="mm" data-gravatar-secure="true" data-gravatar-css-class="img-responsive" ng-if="!account.public_data"></gravatar-image>

        <img class="img-responsive" src="https://secure.gravatar.com/avatar/{{account.public_data.gravatarID}}?s=512&amp;r=pg&amp;d=mm" ng-if="!!account.public_data">
		
		<div class="text-center p-inner white-shadow">
			{{gravatarDisplayName}}
		</div>
		
		<div class="text-center">
			<button ng-click="toggleFavorite()" class="btn btn-sm btn-link primary" tooltip="Toggle favorite">
	        	<i ng-class="(account.is_favorite) ? 'fa fa-star fa-2x' : 'fa fa-star-o fa-2x'"></i>
	  		</button>
			<span ng-switch on="account.delegate_info">
	  			<button ng-switch-default ng-click="toggleVoteUp()" class="btn btn-sm btn-link primary" tooltip="Toggle vote up">
			    	<i ng-class="(trust_level && trust_level > 0) ? 'fa fa-thumbs-up fa-2x' : 'fa fa-thumbs-o-up fa-2x'"></i>
				</button>
	  			<button ng-switch-when="null" style='color:grey' class="btn btn-sm btn-link" disabled="true">
			    	<i class='fa fa-thumbs-o-up fa-2x'></i>
				</button>
			</span>
		</div>
	</div>


	<div class="col-sm-10">
		<div class="header p-inner ">
	  		<div class="" ng-switch on="account.registration_date">
		  		<div ng-switch-when="19700101T000000">
		          <div ng-switch on="p.pendingRegistration">
					  <div ng-switch-when='pending'>
					    <div class="pull-right" translate>account.reg_pending</div>
		                <div style='color:white;font-size:300%'>{{account.name}}</div>
					  </div>
					  <div ng-switch-default ng-show="account.is_my_account">
					    <div class="pull-right">
		  		      	  <a style="margin-top: 4px;" type="submit" ng-click='regDial()'  class="btn btn-primary btn-success"><i class="fa fa-credit-card fa-lg fa-fw"></i> {{'account.reg' | translate}} {{account.name}}</a>
		  		        </div>
		  		      	<a onbeforesave="updateUser($data)" tooltip="Click to edit" href="#" style='font-size:200%' editable-text="account.name">{{account.name}}</a>
		  		      </div>
		  		    </div>
		        </div>      
		        <div class="reg-date" style="" class="white-shadow" ng-switch-default>
		          <div style='color:white;font-size:200%'>{{account.name}}</div>
		          <br>
		          <i class="white">{{ 'account.reg_date' | translate }}: <span class="text-success">{{ account.registration_date | prettyDate }}</span></i>
		        </div>
	    	</div>
	    	<table  class="table table-striped table-acc-balance" ng-if="account.delegate_info">
	          <thead>
	          <tr>
	          	<th>APPROVAL</th>
	              <th>Reliability</th>
	              <th>Blocks Produced</th>
	              <th>PAY RATE</th>
	            <th>Pay Balance</th>
	          </tr>
	          </thead>
	          <tbody>
	             <tr>
	             <td>
                <span ng-switch on='del.delegate_info.votes_for/current_xts_supply<0.0001' tooltip="Votes for: {{ account.delegate_info.votes_for | formatVotes}}">
					<span ng-switch-when='true'>&#60;0.01%</span>
					<span ng-switch-default>{{ (account.delegate_info.votes_for)/current_xts_supply*100 | number:2 }}%</span>
				</span>
              </td>
              <td ng-switch on='account.delegate_info.blocks_produced>0 || account.delegate_info.blocks_missed>0'>
                <span ng-switch-when='true'>{{ account.delegate_info.blocks_produced/(account.delegate_info.blocks_produced + account.delegate_info.blocks_missed)*100 | number:2 }}%</span>
                <span ng-switch-default>Unknown</span>
              </td>
              <td>{{ account.delegate_info.blocks_produced }}</td>
              <td>{{ account.delegate_info.pay_rate }}%</td>
	                <td>
	                    {{account.delegate_info.pay_balance_asset | formatAsset}}
	                </td>
	             </tr>
	          </tbody>
	        </table>
    	</div>
  	</div>
  
    <div class="col-sm-12">
        <div class="pull-right p-inner">
        <table  class="table table-striped table-acc-balance" ng-show="account.is_my_account">
          <thead>
          <tr>
            <th><h3 class="header-title text-muted" translate>account.balances</h3></th>
          </tr>
          </thead>
          <tbody>
             <tr ng-repeat="(symbol, asset) in balances">
                <td>
                    {{asset | formatAsset}}
                </td>
             </tr>
          </tbody>
        </table>
        </div>
    </div>
</div>
<hr>
<div class="row">
  

  
	<!--<button class="btn btn-primary"><i class="fa fa-file-excel-o fa-lg fa-fw"></i> Issue assets</button>
  <button class="btn btn-primary">Free Registration</button> -->

<div class="col-sm-12 p-top">
<tabset>
    <tab active="$parent.t_active">
    <tab-heading><i class="fa fa-exchange fa-fw fa-lg"></i> {{'account.transactions' | translate }}</tab-heading>
      <div class="p-inner" ng-controller="TransactionsController" ng-include src="'transactions.html'"></div>
    </tab>
    <tab ng-show="account.is_my_account">
    <tab-heading><i class="fa fa-sign-out fa-fw fa-lg"></i>{{ 'account.transfer' | translate }}</tab-heading>
          <div id="transfer-form p-inner">
           <form name="my_transfer_form" class="form-horizontal p-inner" role="form" ng-submit="my_transfer_form.$valid && send()" >
             <div class="form-group row">
                 <label for="amount" class="col-sm-2 control-label" translate>account.amount</label>
               <div class="col-md-3">
                   <input ng-model="transfer_info.amount" type="text" class="form-control" placeholder="0.0" id="amount" ui-validate="'$value > 0'"required/>
               </div>
                 <div class="col-md-2">
                   <select class="form-control" id='symbol' ng-model="transfer_info.symbol" ng-options="k as k for (k, v) in $parent.balances"></select> 
                 </div>
              </div>

            <div class="form-group">
                <label for="payto" class="col-sm-2 control-label" translate>account.to</label>
             <div class="col-md-5">
                          <div class="input-group">
             
              <input ng-model="transfer_info.payto" watch-change="addContactFromTo()" type="text" class="form-control" placeholder="Contact Name" id="payto" typeahead="state as state for state in accountSuggestions($viewValue) | filter:{name: $viewValue}" typeahead-append-to-body='true' ng-maxlength="63" ng-pattern="/[a-z]+(?:\-*[a-z0-9])*$/" required/>
                 <span ng-click='newContactModal()' type="button" class=" input-group-addon btn white btn-success"><i class="fa fa-plus fa-lg fa-fw"></i> <i class="fa fa-user"></i></span>
          </div>
            </div>
</div>

            <div class="form-group">
             <label for="memo" class="col-sm-2 control-label" translate>account.memo</label>
             <div class="col-md-5">
                 <input ng-model="transfer_info.memo" type="text" class="form-control" ui-validate="{valid_memo: 'utils.byteLength($value) <= memo_size_max'}" placeholder="Memo" id="memo"/>
             </div>
            </div>
             <div class="form-group row">
               <div class="col-sm-offset-2 col-sm-10">
                   <button type="submit" class="btn btn-primary btn-success"><i class="fa fa-credit-card fa-lg fa-fw"></i> {{'account.send'|translate}}</button>
               </div>
             </div>
           </form>
          </div>
    </tab>
    <tab ng-show="account.is_my_account">
    <tab-heading><i class="fa fa-renren fa-fw fa-lg"></i> {{ 'account.assets' | translate }}</tab-heading>
      <div ng-controller="ManageAssetsController" ng-include src="'manage_assets.html'"></div>
    </tab>
    <tab ng-show="account.is_my_account">
    <tab-heading><i class="fa fa-cogs fa-fw fa-lg"></i> {{ 'account.advanced' | translate }}</tab-heading>
    <div class="p-inner"><b> {{ 'account.account_key' | translate}}:</b> {{account.active_key}}</div>

      <tabset class="p-inner">
          <tab heading="Import Private Key">
          <form class="form-horizontal" role="form" ng-submit="import_key()">
                <div class="form-group">
                 <label for="pk_value" class="col-sm-2 control-label" translate>account.priv_key</label>
                 <div class="col-sm-9">
                  <input ng-model="private_key.value" type="text" class="form-control" id="pk_value" placeholder="Private Key"/>
                 </div>
                </div>
                <div class="form-group">
                 <div class="col-sm-offset-2 col-sm-10">
                  <button type="submit" class="btn btn-primary" translate>account.import_key</button>
                 </div>
                </div>

               </form>	
          </tab>
          <tab heading="Import Wallet">
           <br/>

           <form class="form-horizontal" role="form" ng-submit="import_wallet()">
            <div class="form-group">
             <label for="wallet_file" class="col-sm-2 control-label" translate>account.wallet_type</label>
             <div class="col-sm-9">
                <select name="menu">
                <option value="1">Bitcoin</option>
                <option value="2">Multibit</option>
                <option value="3">Electrum</option>
                </select>
             </div>
            </div>
            <div class="form-group">
             <label for="wallet_file" class="col-sm-2 control-label" translate>account.wallet_path</label>
             <div class="col-sm-9">
              <input ng-model="wallet_info.file" type="text" class="form-control" id="wallet_file" placeholder=""/>
             </div>
            </div>
            <div class="form-group">
             <label for="wallet_password" class="col-sm-2 control-label" translate>account.wallet_password</label>
             <div class="col-sm-9">
              <input ng-model="wallet_info.password" type="password" class="form-control" id="wallet_password" placeholder="Password"/>
             </div>
            </div>
            <div class="form-group">
             <div class="col-sm-offset-2 col-sm-10">
              <button type="submit" class="btn btn-primary" translate>account.import_wallet</button>
             </div>
            </div>
           </form>
          </tab>
	    
      </tabset>
    </tab>
    <tab ng-show='account.is_my_account'>
    <tab-heading><i class="fa fa-edit fa-fw fa-lg"></i> {{ 'edit' | translate }}</tab-heading>
        <div ng-controller="EditLocalController" ng-include src="'editlocal.html'" ng-if="!utils.is_registered(account)"></div>
        <div ng-controller="UpdateRegAccountController" ng-include src="'update-reg-account.html'" ng-if="utils.is_registered(account)"></div>
    </tab>
</tabset>
</div>
</div>
